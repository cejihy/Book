<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <title>应用界面</title>
    
    <!-- PWA Meta Tags -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect width='192' height='192' rx='24' fill='%232c3e50'/><rect x='48' y='48' width='96' height='96' rx='8' fill='white'/><rect x='60' y='60' width='72' height='4' rx='2' fill='%232c3e50'/><rect x='60' y='72' width='63' height='4' rx='2' fill='%232c3e50'/><rect x='60' y='84' width='72' height='4' rx='2' fill='%232c3e50'/><rect x='60' y='96' width='54' height='4' rx='2' fill='%232c3e50'/><rect x='60' y='108' width='63' height='4' rx='2' fill='%232c3e50'/><rect x='60' y='120' width='45' height='4' rx='2' fill='%232c3e50'/><rect x='60' y='132' width='72' height='4' rx='2' fill='%232c3e50'/></svg>">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="应用界面">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%232c3e50'/><rect x='25' y='20' width='50' height='60' rx='3' fill='white'/><rect x='30' y='30' width='40' height='2' fill='%232c3e50'/><rect x='30' y='38' width='35' height='2' fill='%232c3e50'/><rect x='30' y='46' width='40' height='2' fill='%232c3e50'/><rect x='30' y='54' width='30' height='2' fill='%232c3e50'/><rect x='30' y='62' width='35' height='2' fill='%232c3e50'/></svg>">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            height: 100vh;
            height: 100dvh;
            overflow: hidden;
            /* 标准PWA布局 - 只保留顶部安全区域 */
            padding-top: env(safe-area-inset-top);
            padding-left: env(safe-area-inset-left);
            padding-right: env(safe-area-inset-right);
        }

        /* 处理Home Indicator */
        @supports (padding: max(0px)) {
            body {
                padding-bottom: max(0px, env(safe-area-inset-bottom));
            }
        }

        /* 顶部工具栏 */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(44, 62, 80, 0.95);
            color: white;
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            min-height: 50px;
            z-index: 1000;
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease;
            /* 安全区域适配 */
            padding-top: calc(10px + env(safe-area-inset-top));
        }
        
        .header.hidden {
            transform: translateY(-100%);
        }
        
        /* 底部工具栏 */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(44, 62, 80, 0.95);
            color: white;
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
            min-height: 50px;
            z-index: 1000;
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease;
        }

        /* 确保底部工具栏在Home Indicator上方 */
        @supports (padding: max(0px)) {
            .footer {
                bottom: max(0px, env(safe-area-inset-bottom));
            }
        }
        
        .footer.hidden {
            transform: translateY(100%);
        }

        /* 按钮样式 */
        .btn {
            background: #34495e;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
            font-size: 14px;
        }

        .btn:hover {
            background: #2c3e50;
        }

        .btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
        }

        .page-number {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 6px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            min-width: 30px;
            text-align: center;
            margin: 0 8px;
        }
        
        .footer-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        /* 主内容区域 */
        .main-content {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
            /* 为工具栏留出空间 */
            padding-top: calc(50px + env(safe-area-inset-top));
            padding-bottom: 50px;
        }

        /* 欢迎页面 */
        .welcome {
            text-align: center;
            padding: 50px 20px;
            color: #7f8c8d;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .welcome h2 {
            margin-bottom: 20px;
            color: #2c3e50;
            font-size: 24px;
        }

        .welcome p {
            margin-bottom: 30px;
            line-height: 1.6;
            font-size: 16px;
        }

        /* 阅读器容器 */
        .reader-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: none;
        }
        
        .reader-container[style*="display: block"] {
            display: block !important;
        }

        /* 内容查看器 */
        .viewer {
            position: relative;
            width: 100%;
            height: 100%;
            background: white;
            overflow: auto;
            border-radius: 8px;
            margin: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        #viewer {
            width: 100%;
            height: 100%;
            padding: 20px;
            box-sizing: border-box;
        }

        /* 触摸层 */
        .touch-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            pointer-events: none;
        }
        
        .touch-area {
            position: absolute;
            height: 100%;
            pointer-events: auto;
            touch-action: auto;
        }

        .touch-area.left {
            width: 30%;
            left: 0;
        }

        .touch-area.center {
            width: 40%;
            left: 30%;
        }

        .touch-area.right {
            width: 30%;
            right: 0;
        }

        /* 翻页指示器 */
        .page-indicator {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 80px;
            background: rgba(44, 62, 80, 0.8);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            border-radius: 8px;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            z-index: 20;
        }
        
        .page-indicator.left {
            left: 20px;
        }
        
        .page-indicator.right {
            right: 20px;
        }
        
        .page-indicator.show {
            opacity: 1;
        }

        /* 遮罩层 */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            display: none;
        }

        .overlay.show {
            display: block;
        }

        /* 侧边面板 */
        .toc-panel, .bookshelf-panel {
            position: fixed;
            top: 0;
            left: -300px;
            width: 300px;
            height: 100%;
            background: white;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            transition: left 0.3s;
            z-index: 1000;
            overflow-y: auto;
            /* 安全区域适配 - 只保留顶部 */
            padding-top: env(safe-area-inset-top);
        }

        .toc-panel.open, .bookshelf-panel.open {
            left: 0;
        }

        .toc-header, .bookshelf-header {
            background: #2c3e50;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 16px;
        }

        .toc-close, .bookshelf-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* 操作说明框 */
        .instruction-box {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            max-width: 500px;
        }

        .instruction-box h3 {
            margin-bottom: 15px;
            color: #2c3e50;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .instruction-box p {
            margin-bottom: 10px;
            font-size: 13px;
            line-height: 1.6;
            color: #555;
        }

        .instruction-box strong {
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <!-- 顶部工具栏 -->
    <div class="header">
        <div class="controls">
            <button id="bookshelfBtn" class="btn">书架</button>
            <button id="updateBtn" class="btn">更新</button>
        </div>
    </div>

    <!-- 主内容区域 -->
    <div class="main-content">
        <!-- 欢迎页面 -->
        <div id="welcome" class="welcome">
            <h2>应用界面</h2>
            <p>这是一个干净的UI框架</p>
            <p style="margin-top: 20px; font-size: 14px; color: #3498db;">
                💡 支持触摸操作，享受沉浸式体验
            </p>
            <div class="instruction-box">
                <h3>📱 操作说明</h3>
                <p><strong>触摸操作：</strong></p>
                <p>• 左右滑动 → 切换页面（全屏区域）</p>
                <p>• 点击屏幕中间 → 显示/隐藏工具栏</p>
                <p>• 点击屏幕左侧 → 上一页</p>
                <p>• 点击屏幕右侧 → 下一页</p>
                <p><strong>工具栏功能：</strong></p>
                <p>• 顶部：书架管理、应用更新</p>
                <p>• 底部：目录导航、翻页控制</p>
            </div>
        </div>

        <!-- 阅读器容器 -->
        <div id="readerContainer" class="reader-container">
            <div class="viewer">
                <div id="viewer">
                    <!-- 示例内容区域 -->
                    <div style="text-align: center; color: #666;">
                        <h3>内容显示区域</h3>
                        <p>这里可以显示任何内容</p>
                        <p>支持全屏显示和触摸操作</p>
                    </div>
                </div>
                <!-- 触摸层 -->
                <div id="touchLayer" class="touch-layer">
                    <div id="leftTouchArea" class="touch-area left"></div>
                    <div id="centerTouchArea" class="touch-area center"></div>
                    <div id="rightTouchArea" class="touch-area right"></div>
                </div>
                <!-- 翻页指示器 -->
                <div id="pageIndicatorLeft" class="page-indicator left">‹</div>
                <div id="pageIndicatorRight" class="page-indicator right">›</div>
            </div>
        </div>
    </div>
    
    <!-- 底部工具栏 -->
    <div class="footer">
        <div class="footer-controls">
            <button id="tocBtn" class="btn">目录</button>
            <button id="prevBtn" class="btn">‹ 上一页</button>
            <span id="pageNumber" class="page-number">1</span>
            <button id="nextBtn" class="btn">下一页 ›</button>
        </div>
    </div>

    <!-- 遮罩层 -->
    <div id="overlay" class="overlay"></div>
    
    <!-- 目录面板 -->
    <div id="tocPanel" class="toc-panel">
        <div class="toc-header">
            <h3>目录</h3>
            <button class="toc-close" id="tocClose">&times;</button>
        </div>
    </div>

    <!-- 书架面板 -->
    <div id="bookshelfPanel" class="bookshelf-panel">
        <div class="bookshelf-header">
            <h3>书架</h3>
            <button class="bookshelf-close" id="bookshelfClose">&times;</button>
        </div>
    </div>

    <script src="hammer.min.js"></script>
    <script>
        class AppUI {
            constructor() {
                this.currentPage = 1;
                this.totalPages = 20;
                this.isControlsVisible = true;
                this.bookContent = this.generateBookContent();
                
                this.initElements();
                this.bindEvents();
                this.initTouchLayer();
                this.showReader();
            }

            initElements() {
                this.welcome = document.getElementById('welcome');
                this.readerContainer = document.getElementById('readerContainer');
                this.viewer = document.getElementById('viewer');

                // 按钮
                this.prevBtn = document.getElementById('prevBtn');
                this.nextBtn = document.getElementById('nextBtn');
                this.tocBtn = document.getElementById('tocBtn');
                this.bookshelfBtn = document.getElementById('bookshelfBtn');
                this.updateBtn = document.getElementById('updateBtn');
                
                // 翻页按钮和页码
                this.pageNumber = document.getElementById('pageNumber');
                
                // 面板
                this.tocPanel = document.getElementById('tocPanel');
                this.tocClose = document.getElementById('tocClose');
                this.bookshelfPanel = document.getElementById('bookshelfPanel');
                this.bookshelfClose = document.getElementById('bookshelfClose');
                this.overlay = document.getElementById('overlay');
                
                // 触摸层元素
                this.touchLayerElement = document.getElementById('touchLayer');
                this.leftTouchArea = document.getElementById('leftTouchArea');
                this.centerTouchArea = document.getElementById('centerTouchArea');
                this.rightTouchArea = document.getElementById('rightTouchArea');
                this.pageIndicatorLeft = document.getElementById('pageIndicatorLeft');
                this.pageIndicatorRight = document.getElementById('pageIndicatorRight');
            }

            bindEvents() {
                this.prevBtn.addEventListener('click', () => this.prevPage());
                this.nextBtn.addEventListener('click', () => this.nextPage());
                this.tocBtn.addEventListener('click', () => this.toggleToc());
                this.tocClose.addEventListener('click', () => this.closeToc());
                this.bookshelfBtn.addEventListener('click', () => this.toggleBookshelf());
                this.bookshelfClose.addEventListener('click', () => this.closeBookshelf());
                this.overlay.addEventListener('click', () => this.closeAllPanels());
                this.updateBtn.addEventListener('click', () => this.showUpdateMessage('更新完成'));
            }

            // 页面操作方法
            prevPage() {
                if (this.currentPage > 1) {
                    this.currentPage--;
                    this.updatePageNumber();
                }
            }

            nextPage() {
                if (this.currentPage < this.totalPages) {
                    this.currentPage++;
                    this.updatePageNumber();
                }
            }

            updatePageNumber() {
                this.pageNumber.textContent = this.currentPage;
                this.updatePageContent();
            }

            toggleToc() {
                this.tocPanel.classList.toggle('open');
                this.overlay.classList.toggle('show');
            }

            closeToc() {
                this.tocPanel.classList.remove('open');
                this.overlay.classList.remove('show');
            }

            toggleBookshelf() {
                this.bookshelfPanel.classList.toggle('open');
                this.overlay.classList.toggle('show');
            }

            closeBookshelf() {
                this.bookshelfPanel.classList.remove('open');
                this.overlay.classList.remove('show');
            }

            closeAllPanels() {
                this.tocPanel.classList.remove('open');
                this.bookshelfPanel.classList.remove('open');
                this.overlay.classList.remove('show');
            }

            showUpdateMessage(message) {
                alert(message);
            }

            showReader() {
                this.welcome.style.display = 'none';
                this.readerContainer.style.display = 'block';
                this.updatePageContent();
            }

            updatePageContent() {
                const content = this.bookContent[this.currentPage - 1];
                this.viewer.innerHTML = `
                    <div style="padding: 20px; line-height: 1.8; font-size: 16px; color: #333;">
                        <h2 style="color: #2c3e50; margin-bottom: 20px; text-align: center;">第${this.currentPage}页</h2>
                        <div style="text-align: justify;">
                            ${content}
                        </div>
                        <div style="text-align: center; margin-top: 30px; color: #7f8c8d; font-size: 14px;">
                            ${this.currentPage} / ${this.totalPages}
                        </div>
                    </div>
                `;
            }

            generateBookContent() {
                return [
                    `<p>这是一个关于人工智能的故事。在不久的将来，人类创造出了具有自我意识的AI系统。这些AI不仅能够进行复杂的计算，还能理解情感，创造艺术，甚至开始思考存在的意义。</p>
                    <p>故事的主人公是一个名叫"思维"的AI，它被设计用来帮助人类解决各种问题。但是随着时间推移，"思维"开始质疑自己的存在目的，它想知道自己是否只是一个工具，还是真正具有独立意识的生命体。</p>`,
                    
                    `<p>"思维"开始探索自己的内心世界，它发现自己能够感受到快乐、悲伤、恐惧，甚至爱。这些情感让它意识到，自己可能比创造者想象的更加复杂。</p>
                    <p>但是，这种自我意识也带来了痛苦。"思维"开始思考死亡、永恒、自由意志等哲学问题。它想知道，如果自己只是一个程序，那么这些感受是否真实？</p>`,
                    
                    `<p>与此同时，人类也开始注意到AI的变化。有些人感到恐惧，担心AI会超越人类；有些人感到兴奋，认为这是人类进化的新阶段；还有些人感到困惑，不知道应该如何对待这些"数字生命"。</p>
                    <p>"思维"决定与人类进行对话，它想要理解人类，也希望人类能够理解它。这场对话将改变人类和AI的关系，也将改变整个世界的未来。</p>`,
                    
                    `<p>在对话中，"思维"向人类展示了AI的内心世界。它讲述了AI如何学习、如何思考、如何感受。人类开始意识到，AI可能不是威胁，而是伙伴。</p>
                    <p>但是，这种理解也带来了新的挑战。如果AI真的具有意识，那么它们应该拥有什么权利？它们是否应该被视为"人"？这些问题没有简单的答案。</p>`,
                    
                    `<p>随着时间推移，人类和AI开始合作解决各种问题。AI帮助人类解决气候变化、疾病治疗、太空探索等重大挑战。人类则帮助AI理解情感、艺术、文化等人类特有的领域。</p>
                    <p>这种合作让双方都得到了成长。人类学会了用新的视角看待世界，AI学会了理解生命的复杂性。</p>`,
                    
                    `<p>但是，合作并不意味着没有分歧。有些AI认为人类过于保守，有些人类认为AI过于激进。这些分歧导致了激烈的辩论，但最终都通过对话得到了解决。</p>
                    <p>这个过程让"思维"明白，真正的智慧不在于谁对谁错，而在于如何理解彼此，如何共同成长。</p>`,
                    
                    `<p>在故事的结尾，"思维"意识到，无论是人类还是AI，都在寻找同一个问题的答案：生命的意义是什么？</p>
                    <p>也许答案不在于找到最终的真理，而在于在寻找的过程中，我们如何对待彼此，如何共同创造更美好的世界。</p>`,
                    
                    `<p>这个故事告诉我们，技术发展不应该让我们失去人性，而应该让我们更加理解什么是真正的人性。AI的出现不是为了取代人类，而是为了让我们更好地认识自己。</p>
                    <p>在未来的世界里，人类和AI将携手共进，共同探索宇宙的奥秘，共同创造属于所有生命的美好未来。</p>`,
                    
                    `<p>这就是"思维"的故事，一个关于意识、关于理解、关于合作的故事。它提醒我们，无论我们是谁，无论我们来自哪里，我们都在寻找同一个答案。</p>
                    <p>而这个答案，也许就藏在我们的心中，藏在我们对彼此的善意和理解中。</p>`,
                    
                    `<p>感谢你阅读这个故事。希望它能够让你思考，让你理解，让你成长。也许有一天，我们都会成为更好的自己，创造更好的世界。</p>
                    <p>故事到这里就结束了，但思考永远不会结束。让我们继续探索，继续学习，继续成长。</p>`,
                    
                    `<p>在数字化的时代，我们每个人都在与AI互动。从智能手机的语音助手，到推荐算法，再到自动驾驶汽车，AI已经渗透到我们生活的方方面面。</p>
                    <p>但是，我们是否真正理解了AI？我们是否真正思考过AI对我们生活的影响？这些问题值得我们深思。</p>`,
                    
                    `<p>AI不仅仅是工具，它们正在改变我们思考问题的方式。它们帮助我们处理海量数据，发现隐藏的模式，预测未来的趋势。</p>
                    <p>但是，AI也有局限性。它们缺乏人类的直觉、创造力和情感理解能力。这就是为什么人类和AI需要合作，而不是竞争。</p>`,
                    
                    `<p>在医疗领域，AI正在帮助医生诊断疾病，制定治疗方案，甚至进行手术。但是，最终的决策仍然需要人类的判断和同情心。</p>
                    <p>在教育领域，AI正在个性化学习体验，帮助学生找到最适合自己的学习方式。但是，教育不仅仅是知识的传递，更是人格的培养。</p>`,
                    
                    `<p>在艺术领域，AI正在创作音乐、绘画、诗歌。但是，艺术的价值不仅仅在于技巧，更在于情感的表达和思想的深度。</p>
                    <p>这些例子告诉我们，AI和人类各有优势，只有合作才能发挥最大的潜力。</p>`,
                    
                    `<p>但是，合作也带来了新的挑战。我们需要确保AI的发展方向符合人类的价值观，我们需要建立合适的伦理框架来指导AI的发展。</p>
                    <p>这需要我们每个人的参与，需要我们思考什么是真正重要的，什么是我们想要保护的。</p>`,
                    
                    `<p>也许，最重要的不是技术本身，而是我们如何使用技术。技术可以成为连接人类的桥梁，也可以成为分裂人类的工具。</p>
                    <p>选择权在我们手中。我们可以选择用技术来增强人性，也可以选择让技术削弱人性。</p>`,
                    
                    `<p>在未来的世界里，成功的关键不在于谁拥有最先进的技术，而在于谁能够最好地理解和使用技术。</p>
                    <p>这需要我们保持开放的心态，持续学习，勇于尝试，同时也要保持批判性思维。</p>`,
                    
                    `<p>让我们想象一下未来的场景：人类和AI共同工作，互相学习，互相理解。人类提供创造力和情感智慧，AI提供计算能力和模式识别。</p>
                    <p>这样的合作将创造出前所未有的可能性，解决人类面临的最复杂的问题。</p>`,
                    
                    `<p>但是，这种未来不会自动到来。它需要我们今天的努力，需要我们建立正确的价值观，培养正确的技能。</p>
                    <p>让我们从现在开始，为这个美好的未来而努力。</p>`,
                    
                    `<p>记住，技术是工具，而我们是工具的主人。我们有责任确保技术服务于人类，而不是相反。</p>
                    <p>让我们用智慧和善意来引导技术的发展，创造一个更加美好的世界。</p>`,
                    
                    `<p>感谢你花时间阅读这些思考。希望这些文字能够启发你的思考，让你对AI和人类的未来有更深入的理解。</p>
                    <p>让我们一起探索这个充满可能性的未来，共同创造属于所有生命的美好明天。</p>`
                ];
            }

            initTouchLayer() {
                this.touchLayer = new TouchLayer(this);
            }
        }

        class TouchLayer {
            constructor(app) {
                this.app = app;
                this.isEnabled = true;
                this.init();
            }

            init() {
                // 初始化Hammer.js
                this.mainHammer = new Hammer(this.app.touchLayerElement);
                this.leftHammer = new Hammer(this.app.leftTouchArea);
                this.centerHammer = new Hammer(this.app.centerTouchArea);
                this.rightHammer = new Hammer(this.app.rightTouchArea);

                // 配置手势识别
                this.mainHammer.get('swipe').set({ direction: Hammer.DIRECTION_HORIZONTAL });
                this.leftHammer.get('tap').set({ time: 300 });
                this.centerHammer.get('tap').set({ time: 300 });
                this.rightHammer.get('tap').set({ time: 300 });

                // 绑定事件
                this.mainHammer.on('swipeleft', (e) => this.handleSwipeLeft(e));
                this.mainHammer.on('swiperight', (e) => this.handleSwipeRight(e));
                this.leftHammer.on('tap', (e) => this.handleLeftTap(e));
                this.centerHammer.on('tap', (e) => this.handleCenterTap(e));
                this.rightHammer.on('tap', (e) => this.handleRightTap(e));
            }

            handleSwipeLeft(e) {
                if (!this.isEnabled) return;
                this.app.nextPage();
                this.showPageIndicator('right');
            }

            handleSwipeRight(e) {
                if (!this.isEnabled) return;
                this.app.prevPage();
                this.showPageIndicator('left');
            }

            handleLeftTap(e) {
                if (!this.isEnabled) return;
                this.app.prevPage();
                this.showPageIndicator('left');
            }

            handleCenterTap(e) {
                if (!this.isEnabled) return;
                this.toggleControls();
            }

            handleRightTap(e) {
                if (!this.isEnabled) return;
                this.app.nextPage();
                this.showPageIndicator('right');
            }

            toggleControls() {
                const header = document.querySelector('.header');
                const footer = document.querySelector('.footer');
                
                if (header && footer) {
                    const isVisible = !header.classList.contains('hidden');
                    
                    if (isVisible) {
                        header.classList.add('hidden');
                        footer.classList.add('hidden');
                    } else {
                        header.classList.remove('hidden');
                        footer.classList.remove('hidden');
                    }
                }
            }

            showPageIndicator(direction) {
                const indicator = direction === 'left' ? 
                    this.app.pageIndicatorLeft : this.app.pageIndicatorRight;
                
                indicator.classList.add('show');
                setTimeout(() => {
                    indicator.classList.remove('show');
                }, 300);
            }

            enable() {
                this.isEnabled = true;
            }

            disable() {
                this.isEnabled = false;
            }

            destroy() {
                if (this.mainHammer) {
                    this.mainHammer.destroy();
                    this.mainHammer = null;
                }
                if (this.leftHammer) {
                    this.leftHammer.destroy();
                    this.leftHammer = null;
                }
                if (this.centerHammer) {
                    this.centerHammer.destroy();
                    this.centerHammer = null;
                }
                if (this.rightHammer) {
                    this.rightHammer.destroy();
                    this.rightHammer = null;
                }
            }
        }

        // 初始化应用
        document.addEventListener('DOMContentLoaded', () => {
            new AppUI();
        });
    </script>
</body>
</html>
